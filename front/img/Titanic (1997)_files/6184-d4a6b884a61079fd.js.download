"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6184],{69664:function(n,e,t){t.d(e,{c1:function(){return p.c},nu:function(){return s.n},E8:function(){return v.E},bd:function(){return o.b},mg:function(){return h}});var r=t(2784),o=t(97277),i=t(66383),u=t(92228),a=t(50930),c=t(14865),d=t(30382),l=t.n(d),s=t(90551),v=t(64023),f=t(3499);function g(){var n=(0,u.Z)(["\n    query UserRatingsAndWatchOptions(\n        $idArray: [ID!]!\n        $includeUserRating: Boolean!\n        $fetchOtherUserRating: Boolean!\n        $location: WatchOptionsLocation\n        $otherUserId: ID\n    ) {\n        titles(ids: $idArray) {\n            id\n            userRating @include(if: $includeUserRating) {\n                date\n                value\n            }\n            otherUserRating: userRating(userId: $otherUserId)\n                @include(if: $fetchOtherUserRating) {\n                date\n                value\n            }\n            primaryWatchOption(location: $location) {\n                watchOption {\n                    providerName {\n                        value\n                    }\n                    description {\n                        value\n                    }\n                    link(platform: WEB)\n                }\n            }\n        }\n    }\n"]);return g=function(){return n},n}var I=l()(g()),h=function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,o=(0,s.n)(),u=(0,f.ic)(),d=(0,r.useState)(new Set),l=d[0],g=d[1],h=n.filter((function(n){return!l.has(n)})),p=(0,i.Z)((0,v.E)({query:I,variables:{idArray:h,includeUserRating:o,location:u,otherUserId:t,fetchOtherUserRating:Boolean(t)},context:{serverSideCacheable:!1,personalized:!0},pause:!(0,c.getIsBrowser)()||0===h.length||e}),1),x=p[0];return r.useEffect((function(){var n,e,t=null!==(e=null===x||void 0===x||null===(n=x.data)||void 0===n?void 0:n.titles)&&void 0!==e?e:[];t.forEach((function(n){var e,t,r,o=null===n||void 0===n||null===(e=n.userRating)||void 0===e?void 0:e.value;o&&(null===(t=window.imdb)||void 0===t||null===(r=t.ratings)||void 0===r||r.addRating(null===n||void 0===n?void 0:n.id,o))}));var r=new Set((0,a.Z)(Array.from(l)).concat((0,a.Z)(t.map((function(n){return String(null===n||void 0===n?void 0:n.id)})))));g(r)}),[null===x||void 0===x?void 0:x.data]),x},p=(t(52408),t(92410))},92410:function(n,e,t){t.d(e,{c:function(){return o}});var r=t(45103),o=function(){var n=(0,r.useSnackbar)().sendSnack;return{sendSuccessSnack:function(e){return n({primaryText:e,type:"auto",display:"stacked",baseColor:"accent1"})},sendFailureSnack:function(e){return n({primaryText:e,type:"auto",display:"stacked",baseColor:"accent3"})}}}},90551:function(n,e,t){t.d(e,{n:function(){return o}});var r=t(25140),o=function(){var n;return!!(null===(n=(0,r.B)().context.sidecar)||void 0===n?void 0:n.account.isLoggedIn)}},52408:function(n,e,t){t.d(e,{NE:function(){return l}});var r,o=t(70865),i=t(96670),u=t(26297),a=t(66383),c=t(2784),d=t(69664);!function(n){n.SET_EDGES="set-edges",n.GOTO_PREVIOUS_ITEM="previous-item",n.GOTO_NEXT_ITEM="next-item",n.GOTO_NTH_ITEM="current-item"}(r||(r={}));var l=function(n){var e,t,l,s=n.resolveEdges,v=n.onItemChange,f=n.resolveInitialIndex,g=(0,i.Z)((0,o.Z)({},n),{resolveEdges:void 0,onItemChange:void 0,resolveInitialIndex:void 0}),I=(0,a.Z)((0,d.E8)(g),1)[0],h=I.data,p=I.fetching,x=(0,c.useReducer)((function(n,e){return function(n,e){e.type;var t=(0,u.Z)(e,["type"]);switch(e.type){case r.SET_EDGES:return(0,i.Z)((0,o.Z)({},n),{edges:t.edges});case r.GOTO_NEXT_ITEM:return n.currentIndex===n.edges.length-1?n:(0,i.Z)((0,o.Z)({},n),{currentIndex:n.currentIndex+1,currentItem:n.edges[n.currentIndex+1]});case r.GOTO_PREVIOUS_ITEM:return 0===n.currentIndex?n:(0,i.Z)((0,o.Z)({},n),{currentIndex:n.currentIndex-1,currentItem:n.edges[n.currentIndex-1]});case r.GOTO_NTH_ITEM:return"undefined"!==typeof t.currentIndex&&n.edges[t.currentIndex]?(0,i.Z)((0,o.Z)({},n),{currentIndex:t.currentIndex,currentItem:n.edges[t.currentIndex]}):n;default:return n}}(n,e)}),void 0,(function(){return{edges:n.resolveEdges(h),currentIndex:0}})),E=x[0],y=x[1];(0,c.useEffect)((function(){var n=s(h,E.edges);y({type:r.SET_EDGES,edges:n})}),[h]),(0,c.useEffect)((function(){var n;f&&!m.current||null===v||void 0===v||v(null===(n=E.edges)||void 0===n?void 0:n[E.currentIndex],E.currentIndex)}),[E.edges,E.currentIndex]);var m=(0,c.useRef)(!1);(0,c.useEffect)((function(){if(!m.current&&n.resolveInitialIndex){var e=n.resolveInitialIndex(E.edges);"number"===typeof e&&-1!==e&&(m.current=!0,y({type:r.GOTO_NTH_ITEM,currentIndex:e}))}}),[E.edges,n.resolveInitialIndex]);var b=(0,c.useCallback)((function(){y({type:r.GOTO_PREVIOUS_ITEM})}),[E]),T=(0,c.useCallback)((function(){y({type:r.GOTO_NEXT_ITEM})}),[E]),O=(0,c.useCallback)((function(n){y({type:r.GOTO_NTH_ITEM,currentIndex:n})}),[E]),S=(0,c.useCallback)((function(){var n=s(void 0,E.edges);y({type:r.SET_EDGES,edges:n})}),[s]);return{items:E.edges,currentItem:(null===(e=E.edges)||void 0===e?void 0:e[E.currentIndex])||null,currentIndex:E.currentIndex,hasNextItem:!!(null===(t=E.edges)||void 0===t?void 0:t[E.currentIndex+1]),hasPreviousItem:!!(null===(l=E.edges)||void 0===l?void 0:l[E.currentIndex-1]),isFetching:p,gotoPreviousItem:b,gotoNextItem:T,gotoNthItem:O,refreshEdges:S}}},64023:function(n,e,t){t.d(e,{E:function(){return Z}});var r=t(70865),o=t(96670),i=t(14865),u=t(70314),a=t.n(u),c=t(5632),d=t(2784),l=t(26806),s=t(25140),v=t(26475),f=t(66655),g=t(92228),I=t(947),h=t.n(I),p=t(30382),x=t.n(p),E=t(3440),y=t.n(E),m=t(94177);function b(){var n=(0,g.Z)(["\n                  ","\n              "]);return b=function(){return n},n}var T=(0,m.nN)(),O=T.source,S=T.next;(0,m.zG)(O,(0,m.f3)((0,m.FG)(100)),(0,m.qn)(15),(0,m.Ld)((function(n){var e=y()(n,(function(n){var e=n.context,t=e.pageType,r=e.subPageType;return w(t)+w(r)}));Object.keys(e).forEach((function(n){var t=e[n];_(n,t)}))})));var w=function(n){var e=null!==n&&void 0!==n?n:"";if(0===e.length)return e;var t=e[0]||e.charAt(0);return t?t.toUpperCase()+e.substr(1):""},_=function(n,e){if(e&&e.length>0){var t=e[0],r=e.slice(1),o="BatchPage_"+n,i=h()(o).add(t.query,t.variables);for(var u in r)try{var a=r[u];i=i.add(a.query,a.variables)}catch(v){console.log(v)}var c=i.document,d=i.variables,l=t.client,s=t.context;l.query(c,d,s).toPromise().then((function(n){e.forEach((function(e){e.callback(n.data,n.error)}))}))}},R=function(n,e,t,r,o){return{client:n,query:"string"===typeof e?x()(b(),e):e,variables:t,context:r,callback:function(n,e){o({data:n,error:e,stale:!1,fetching:!1})}}},Z=function(n){var e,t=(0,s.B)().context,u=a()().publicRuntimeConfig.cachedGraphQLEndpoint,g=!0===n.context.personalized,I=n.query;if(g&&(n.context.preferGetMethod||n.context.url&&n.context.url===u))throw new Error("context.preferGetMethod cannot be true nor can the caching Zuko endpoint be used when context.personalized is true. Personalized data is uncacheable.");var h=!!n.context.clientSideBatch,p=(0,d.useRef)(h);if(p.current!==h)throw new Error("context.clientSideBatch cannot change between calls; you must decide how you want this operation to behave and it must stay that way");var x=(0,r.Z)({locale:null===(e=t.sidecar)||void 0===e?void 0:e.localizationResponse.userLanguage},n.variables),E=(0,d.useMemo)((function(){return(0,v.Z)((0,f.Z)(n.context,t),{query:I})}),[t,n.context.personalized]),y={};if(p.current)return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,r={stale:!1,fetching:!0},o=(0,d.useState)(r),u=o[0],a=o[1],c=(0,l.m8)(),s=R(c,n,e,t,a);return(0,d.useEffect)((function(){i.isBrowser&&S(s)}),[]),[u,function(n){S(s)}]}(n.query,x,E);(0,i.getIsNode)()&&g&&(y.pause=!0);var m=(0,c.useRouter)(),b=null===m||void 0===m?void 0:m.asPath.split("?")[1];return b&&b.indexOf("forceCSR")>-1&&(0,i.getIsNode)()&&(y.pause=!0),g&&!n.requestPolicy&&(y.requestPolicy="network-only"),(0,l.aM)((0,o.Z)((0,r.Z)({},n,y),{context:E,variables:x}))}},97277:function(n,e,t){t.d(e,{b:function(){return g},h:function(){return I}});var r=t(66383),o=t(92228),i=t(50930),u=t(14865),a=t(30382),c=t.n(a),d=t(2784),l=t(64023),s=t(90551);function v(){var n=(0,o.Z)(["\n    query TitlesUserRatings($idArray: [ID!]!) {\n        titles(ids: $idArray) {\n            id\n            userRating {\n                value\n            }\n        }\n    }\n"]);return v=function(){return n},n}var f=c()(v());function g(n){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=(0,s.n)(),a=(0,d.useState)(new Set),c=a[0],v=a[1],g=(null===n||void 0===n?void 0:n.map((function(n){return n.id})))||[],I=g.filter((function(n){return!c.has(n)})),h=(0,r.Z)((0,l.E)({query:f,variables:{idArray:I},context:{serverSideCacheable:!1,personalized:!0},pause:!u.isBrowser||!o||0===I.length||t}),1),p=h[0],x=(null===(e=p.data)||void 0===e?void 0:e.titles)||[];return d.useEffect((function(){x.forEach((function(n){var e,t,r,o=null===n||void 0===n||null===(e=n.userRating)||void 0===e?void 0:e.value;o&&(null===(t=window.imdb)||void 0===t||null===(r=t.ratings)||void 0===r||r.addRating(null===n||void 0===n?void 0:n.id,o))}));var n=new Set((0,i.Z)(Array.from(c)).concat((0,i.Z)(x.map((function(n){return String(null===n||void 0===n?void 0:n.id)})))));v(n)}),[null===p||void 0===p?void 0:p.data]),p}function I(n,e){d.useEffect((function(){var t,r;e&&(null===(t=window.imdb)||void 0===t||null===(r=t.ratings)||void 0===r||r.addRating(n,e))}),[n,e])}},3499:function(n,e,t){t.d(e,{QJ:function(){return d},ic:function(){return a},wT:function(){return u}});var r=t(70865),o=t(25140),i={latLong:{lat:"47.61",long:"-122.33"}},u=((0,r.Z)({radiusInMeters:80467},i),function(){var n=(0,o.B)().context;return d(n)}),a=function(){var n=(0,o.B)().context;return c(n)},c=function(n){var e,t=null===(e=n.sidecar)||void 0===e?void 0:e.localizationResponse;if(!t)return i;var r=t.showtimesPostalCode,o=t.latitude,u=t.longitude;return r?{postalCodeLocation:{country:r.countryCode,postalCode:r.postalCode}}:o&&u?{latLong:{lat:o,long:u}}:i},d=function(n){var e=c(n);return{radiusInMeters:80467,postalCode:e.postalCodeLocation,latLong:e.latLong}}}}]);